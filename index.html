<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <title>My Archive v5</title>
  <link rel="stylesheet" href="style.css"/>
  <script>
    if (!sessionStorage.getItem("auth")) { location.href = "login.html"; }
  </script>
</head>
<body>
<nav class="topbar"><div class="top-inner"><div class="logo">ğŸ“¦ My Archive</div></div></nav>
<div class="layout">
  <main class="content"><div id="post-list"></div></main>
</div>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const list = document.getElementById("post-list");
    fetch("posts/index.json?v=" + Date.now())
      .then(r => r.json())
      .then(posts => {
        posts.sort((a, b) => new Date(b.date) - new Date(a.date));
        posts.forEach(p => {
          const item = document.createElement("div");
          item.className = "post-item";
          item.innerHTML = `<h3>${p.title}</h3><span class="date">${p.date}</span>`;
          
          item.onclick = () => {
            // â­ íŒŒì¼ëª…ì— ì•„ë¬´ê²ƒë„ ê°•ì œë¡œ ë¶™ì´ì§€ ì•Šê³ , index.jsonì— ì íŒ ê·¸ëŒ€ë¡œë§Œ ì—°ê²°í•©ë‹ˆë‹¤.
            location.href = `viewer.html?post=posts/${p.file}&from=home`;
          };
          list.appendChild(item);
        });
      });
  });
</script>
</body>
</html>
